"use strict";async function e(e){return new Promise((o=>setTimeout(o,e)))}var o;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.Continue=100]="Continue",e[e.Success=200]="Success",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NoContent=204]="NoContent",e[e.MovedPermenantly=301]="MovedPermenantly",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.NotModified=304]="NotModified",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.IAmATeapot=418]="IAmATeapot",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.AuthenticationRequired=511]="AuthenticationRequired"}(o||(o={})),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});async function t(o,t,r,i,c={}){if(a(o))return void console.info(`Attempt to add script tag for the "${o}" library in Google Maps ignored as this tag already exists in the DOM${t?" [ "+t+"]":""}`);const l=()=>{var e=document.createElement("script");return e.id=`google-maps-${o}-js`,e.src=n(o,t,!0,r,i),document.querySelector("head").appendChild(e),new Promise((e=>{window[o+"LoaderCallback"]=()=>{e()}}))};return Promise.race(c.timeout?[(async(t=2e3)=>{throw await e(t),new Error(`Timed out waiting for Google API to load [ ${o} / ${t} ]`)})(c.timeout),l()]:[l()])}function n(e,o,t=!0,n,a){let r=`https://maps.googleapis.com/maps/api/js?libraries=${e}&sensors=false`;return o&&(r=`${r}&key=${o}`),n&&(r=`${r}&region=${n}`),a&&(r=`${r}&language=${a}`),t&&(r=`${r}&callback=${e}LoaderCallback`),r}function a(e,o){const t=document.querySelector(`#google-maps-${e}-js`);return Boolean(t)}exports.loadNow=async function(e,o,n,r){return console.log("connect-gmaps: loadNow"),a(e)?(console.log("connect-gmaps: Script already exists"),window.google):(await t(e,o,n,r),window.google)},exports.preload=async function(o,a,r=2e3){!function(e,o){var t=document.createElement("link");t.id="preload-for-"+e,t.rel="preload",t.as="script",t.href=n(e,o,!1),document.querySelector("head").appendChild(t)}(o,a),await e(r),await t(o,a)},exports.unload=function(e){console.log("connect-gmaps: unload");const o=document.getElementById(`#google-maps-${e}-js`);console.log("connect-gmaps: oldScript",o),null!==o&&null!==o.parentNode&&(console.log("connect-gmaps: remove DOM"),o.parentNode.removeChild(o),console.log("connect-gmaps: delete object"),delete window.google.maps)};
